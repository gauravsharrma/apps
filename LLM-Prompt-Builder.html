<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LLM Prompt Builder</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer>
    let parameters = [];
    let grouped = {};

    async function loadData() {
      const response = await fetch('llm_prompt_simulation_parameters.json');
      parameters = await response.json();
      grouped = parameters.reduce((acc, obj) => {
        acc[obj.Parameter] = acc[obj.Parameter] || [];
        acc[obj.Parameter].push(obj);
        return acc;
      }, {});
      populateParameterSelectors();
    }

    function populateParameterSelectors() {
      const container = document.getElementById('param-selectors');
      container.innerHTML = '';
      for (const param in grouped) {
        const div = document.createElement('div');
        div.className = 'mb-4';
        const label = document.createElement('label');
        label.className = 'block font-semibold mb-1';
        label.textContent = param;
        const select = document.createElement('select');
        select.className = 'w-full p-2 border rounded';
        select.name = param;
        grouped[param].forEach(opt => {
          const option = document.createElement('option');
          option.value = opt.PromptStyle;
          option.textContent = opt.Target;
          select.appendChild(option);
        });
        div.appendChild(label);
        div.appendChild(select);
        container.appendChild(div);
      }
    }

    function generatePrompt() {
      const inputTopic = document.getElementById('inputTopic').value;
      const selects = document.querySelectorAll('#param-selectors select');
      let promptParts = [];
      selects.forEach(select => {
        promptParts.push(select.value.replace('[INPUT]', inputTopic));
      });
      document.getElementById('outputPrompt').value = promptParts.join(' ');
    }

    window.onload = loadData;
  </script>
</head>
<body class="bg-gray-50 p-6 font-sans">
  <div class="max-w-3xl mx-auto bg-white shadow-md rounded p-6">
    <h1 class="text-2xl font-bold mb-4">ğŸ”§ LLM Prompt Builder</h1>
    <label class="block mb-2 font-medium">ğŸ§  What do you want to know?</label>
    <input id="inputTopic" class="w-full mb-4 p-2 border rounded" placeholder="e.g. How ChatGPT works" />

    <div id="param-selectors" class="mb-6"></div>

    <button onclick="generatePrompt()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Generate Prompt</button>

    <div class="mt-6">
      <label class="block font-medium mb-2">ğŸ“ Generated Prompt:</label>
      <textarea id="outputPrompt" rows="6" class="w-full p-2 border rounded"></textarea>
    </div>
  </div>
</body>
</html>
